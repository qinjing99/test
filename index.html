<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script>

//LBS : 基于地图信息的应用

window.onload = function(){
	var oInput = document.getElementById('input1');
	var oT = document.getElementById('t1');
	
	oInput.onclick = function(){                       //navigator.geolocation是个对象，对象下面有很多方法
		navigator.geolocation.getCurrentPosition(function(position){   //navigator.geolocation.getCurrentPosition获取位置，成功的回调
			oT.value += '经度:' + position.coords.longitude+'\n';
			oT.value += '纬度 :' + position.coords.latitude+'\n';
			oT.value += '准确度 :' + position.coords.accuracy+'\n';
			oT.value += '海拔 :' + position.coords.altitude+'\n';                 //undefined ，在移动设备根据GPS获取
			oT.value += '海拔准确度 :' + position.coords.altitudeAcuracy+'\n';    //NAN  在移动设备根据GPS获取
			oT.value += '行进方向 :' + position.coords.heading+'\n';              //NAN  在移动设备根据GPS获取
			oT.value += '地面速度 :' + position.coords.speed+'\n';
			oT.value += '时间戳:' + new Date(position.timestamp)+'\n';
		},function(err){                   //失败的回调函数
			alert( err.code );             //err.code 失败所对应的编号；
			                               //0代表不包括其他错误编号的错误；
			                               //1代表用户拒绝获取地理信息；
			                               //2代表尝试获取用户信息，但失败了；
			                               //3代表设置的timeout值，获取超时了

			
		},{
			enableHighAcuracy : true,      //更精确的查找，默认false；
			//timeout : 5000,                //请求最大时间，不设置就是一直请求，超出则超时
			maximumAge : 5000              //设置缓存的最大时间，连续点击可以走缓存
		});
		
	};
	
};

</script>
</head>

<body>
<input type="button" value="请求" id="input1" /><br />
<textarea id="t1" style="width:400px; height:400px; border:1px #000 solid;">
</textarea>
</body>
</html>
